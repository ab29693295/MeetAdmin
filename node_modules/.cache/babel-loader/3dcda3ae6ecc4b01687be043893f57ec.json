{"ast":null,"code":"import _classCallCheck from\"E:\\\\Users\\\\cnki\\\\source\\\\repos\\\\ab29693295\\\\MeetAdmin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\Users\\\\cnki\\\\source\\\\repos\\\\ab29693295\\\\MeetAdmin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\Users\\\\cnki\\\\source\\\\repos\\\\ab29693295\\\\MeetAdmin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\Users\\\\cnki\\\\source\\\\repos\\\\ab29693295\\\\MeetAdmin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"E:\\\\Users\\\\cnki\\\\source\\\\repos\\\\ab29693295\\\\MeetAdmin\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{message,Button,Input,Form,Checkbox,Spin}from'antd';import{UserOutlined,LockOutlined}from'@ant-design/icons';import styles from'./css/index.module.css';import axios from'../../axios';import{setStorage}from'../../common/js/tools';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={loading:false};_this.submitFinish=_this.submitFinish.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){console.log(this.props);localStorage.clear();}//验证通过\n},{key:\"submitFinish\",value:function submitFinish(value){var _this2=this;var returnUrl=this.props.location.state?this.props.location.state:'/';axios.userLogin({userName:value.username,PassWord:value.password}).then(function(res){console.log(res);if(res.success){setStorage('isLogin','1',new Date().getTime()+30*60*1000);_this2.props.history.push({pathname:returnUrl});}else{message.error(res.msg);}});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:styles.loginWrap},/*#__PURE__*/React.createElement(Form,{name:\"normal_login\",className:styles.loginForm,initialValues:{remember:true},onFinish:this.submitFinish},/*#__PURE__*/React.createElement(Spin,{spinning:this.state.loading,tip:\"\\u52A0\\u8F7D\\u4E2D...\"},/*#__PURE__*/React.createElement(Form.Item,{name:\"username\",rules:[{required:true,message:'请输入用户名!'}],className:styles.formItem},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(UserOutlined,{className:\"site-form-item-icon\",style:{color:'rgba(0,0,0,.25)'}}),autoComplete:\"off\",placeholder:\"\\u7528\\u6237\\u540D/\\u624B\\u673A\\u53F7/\\u90AE\\u7BB1\"})),/*#__PURE__*/React.createElement(Form.Item,{name:\"password\",rules:[{required:true,message:'请输入密码！'}],className:styles.formItem},/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(LockOutlined,{className:\"site-form-item-icon\",style:{color:'rgba(0,0,0,.25)'}}),type:\"password\",placeholder:\"\\u5BC6\\u7801\"})),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Form.Item,{name:\"remember\",valuePropName:\"checked\",noStyle:true},/*#__PURE__*/React.createElement(Checkbox,null,\"\\u8BB0\\u4F4F\\u5BC6\\u7801\")),/*#__PURE__*/React.createElement(\"a\",{className:styles.formSetting},\"\\u5FD8\\u8BB0\\u5BC6\\u7801\")),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Button,{className:styles.formButton,htmlType:\"submit\",type:\"primary\"},\"\\u767B\\u5F55\")))));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["E:/Users/cnki/source/repos/ab29693295/MeetAdmin/src/view/Login/index.jsx"],"names":["React","Component","message","Button","Input","Form","Checkbox","Spin","UserOutlined","LockOutlined","styles","axios","setStorage","Login","props","state","loading","submitFinish","bind","console","log","localStorage","clear","value","returnUrl","location","userLogin","userName","username","PassWord","password","then","res","success","Date","getTime","history","push","pathname","error","msg","loginWrap","loginForm","remember","required","formItem","color","formSetting","formButton"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport {message,Button, Input, Form, Checkbox, Spin} from 'antd'\r\nimport {UserOutlined, LockOutlined} from '@ant-design/icons';\r\nimport styles from './css/index.module.css'\r\nimport axios from '../../axios'\r\nimport {setStorage} from '../../common/js/tools'\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            loading: false\r\n        }\r\n        this.submitFinish = this.submitFinish.bind(this)\r\n    }\r\n\r\n    componentDidMount() {\r\n        console.log(this.props)\r\n        localStorage.clear()\r\n    }\r\n\r\n    //验证通过\r\n    submitFinish(value) {\r\n        let returnUrl=this.props.location.state?this.props.location.state:'/'\r\n        axios.userLogin({userName:value.username,PassWord:value.password}).then((res)=>{\r\n            console.log(res)\r\n            if(res.success){\r\n                setStorage('isLogin','1',new Date().getTime()+30*60*1000);\r\n                this.props.history.push({\r\n                    pathname: returnUrl\r\n                })\r\n            }else{\r\n                message.error(res.msg);\r\n            }\r\n        })\r\n    }\r\n    render() {\r\n        return (\r\n            <div className={styles.loginWrap}>\r\n                <Form\r\n                    name=\"normal_login\"\r\n                    className={styles.loginForm}\r\n                    initialValues={{remember: true}}\r\n                    onFinish={this.submitFinish}\r\n                >\r\n                    <Spin\r\n                        spinning={this.state.loading}\r\n                        tip='加载中...'\r\n                    >\r\n                        <Form.Item\r\n                            name=\"username\"\r\n                            rules={[{required: true, message: '请输入用户名!'}]}\r\n                            className={styles.formItem}\r\n                        >\r\n                            <Input prefix={<UserOutlined className=\"site-form-item-icon\"\r\n                                                         style={{color: 'rgba(0,0,0,.25)'}}/>} autoComplete=\"off\"\r\n                                   placeholder=\"用户名/手机号/邮箱\"/>\r\n                        </Form.Item>\r\n                        <Form.Item\r\n                            name=\"password\"\r\n                            rules={[{required: true, message: '请输入密码！'}]}\r\n                            className={styles.formItem}\r\n                        >\r\n                            <Input\r\n                                prefix={<LockOutlined className=\"site-form-item-icon\"\r\n                                                      style={{color: 'rgba(0,0,0,.25)'}}/>}\r\n                                type=\"password\"\r\n                                placeholder=\"密码\"\r\n                            />\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Form.Item name='remember' valuePropName=\"checked\" noStyle>\r\n                                <Checkbox>记住密码</Checkbox>\r\n                            </Form.Item>\r\n                            <a className={styles.formSetting}>忘记密码</a>\r\n                        </Form.Item>\r\n\r\n                        <Form.Item>\r\n                            <Button\r\n                                className={styles.formButton}\r\n                                htmlType='submit'\r\n                                type='primary'\r\n                            >\r\n                                登录\r\n                            </Button>\r\n                        </Form.Item>\r\n                    </Spin>\r\n                </Form>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Login\r\n"]},"metadata":{},"sourceType":"module"}