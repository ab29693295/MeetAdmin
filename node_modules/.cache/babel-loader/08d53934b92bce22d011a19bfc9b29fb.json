{"ast":null,"code":"'use strict';\n\nmodule.exports = inflight;\nlet Bluebird;\n\ntry {\n  Bluebird = require('bluebird');\n} catch (_) {\n  Bluebird = Promise;\n}\n\nconst active = {};\ninflight.active = active;\n\nfunction inflight(unique, doFly) {\n  return Bluebird.all([unique, doFly]).then(function (args) {\n    const unique = args[0];\n    const doFly = args[1];\n\n    if (Array.isArray(unique)) {\n      return Bluebird.all(unique).then(function (uniqueArr) {\n        return _inflight(uniqueArr.join(''), doFly);\n      });\n    } else {\n      return _inflight(unique, doFly);\n    }\n  });\n\n  function _inflight(unique, doFly) {\n    if (!active[unique]) {\n      active[unique] = new Bluebird(function (resolve) {\n        return resolve(doFly());\n      });\n      active[unique].then(cleanup, cleanup);\n\n      function cleanup() {\n        delete active[unique];\n      }\n    }\n\n    return active[unique];\n  }\n}","map":{"version":3,"sources":["E:/Users/cnki/source/repos/ab29693295/MeetAdmin/node_modules/promise-inflight/inflight.js"],"names":["module","exports","inflight","Bluebird","require","_","Promise","active","unique","doFly","all","then","args","Array","isArray","uniqueArr","_inflight","join","resolve","cleanup"],"mappings":"AAAA;;AACAA,MAAM,CAACC,OAAP,GAAiBC,QAAjB;AAEA,IAAIC,QAAJ;;AACA,IAAI;AACFA,EAAAA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAlB;AACD,CAFD,CAEE,OAAOC,CAAP,EAAU;AACVF,EAAAA,QAAQ,GAAGG,OAAX;AACD;;AAED,MAAMC,MAAM,GAAG,EAAf;AACAL,QAAQ,CAACK,MAAT,GAAkBA,MAAlB;;AACA,SAASL,QAAT,CAAmBM,MAAnB,EAA2BC,KAA3B,EAAkC;AAChC,SAAON,QAAQ,CAACO,GAAT,CAAa,CAACF,MAAD,EAASC,KAAT,CAAb,EAA8BE,IAA9B,CAAmC,UAAUC,IAAV,EAAgB;AACxD,UAAMJ,MAAM,GAAGI,IAAI,CAAC,CAAD,CAAnB;AACA,UAAMH,KAAK,GAAGG,IAAI,CAAC,CAAD,CAAlB;;AACA,QAAIC,KAAK,CAACC,OAAN,CAAcN,MAAd,CAAJ,EAA2B;AACzB,aAAOL,QAAQ,CAACO,GAAT,CAAaF,MAAb,EAAqBG,IAArB,CAA0B,UAAUI,SAAV,EAAqB;AACpD,eAAOC,SAAS,CAACD,SAAS,CAACE,IAAV,CAAe,EAAf,CAAD,EAAqBR,KAArB,CAAhB;AACD,OAFM,CAAP;AAGD,KAJD,MAIO;AACL,aAAOO,SAAS,CAACR,MAAD,EAASC,KAAT,CAAhB;AACD;AACF,GAVM,CAAP;;AAYA,WAASO,SAAT,CAAoBR,MAApB,EAA4BC,KAA5B,EAAmC;AACjC,QAAI,CAACF,MAAM,CAACC,MAAD,CAAX,EAAqB;AACnBD,MAAAA,MAAM,CAACC,MAAD,CAAN,GAAkB,IAAIL,QAAJ,CAAa,UAAUe,OAAV,EAAmB;AAChD,eAAOA,OAAO,CAACT,KAAK,EAAN,CAAd;AACD,OAFiB,CAAlB;AAGAF,MAAAA,MAAM,CAACC,MAAD,CAAN,CAAeG,IAAf,CAAoBQ,OAApB,EAA6BA,OAA7B;;AACA,eAASA,OAAT,GAAmB;AAAE,eAAOZ,MAAM,CAACC,MAAD,CAAb;AAAuB;AAC7C;;AACD,WAAOD,MAAM,CAACC,MAAD,CAAb;AACD;AACF","sourcesContent":["'use strict'\nmodule.exports = inflight\n\nlet Bluebird\ntry {\n  Bluebird = require('bluebird')\n} catch (_) {\n  Bluebird = Promise\n}\n\nconst active = {}\ninflight.active = active\nfunction inflight (unique, doFly) {\n  return Bluebird.all([unique, doFly]).then(function (args) {\n    const unique = args[0]\n    const doFly = args[1]\n    if (Array.isArray(unique)) {\n      return Bluebird.all(unique).then(function (uniqueArr) {\n        return _inflight(uniqueArr.join(''), doFly)\n      })\n    } else {\n      return _inflight(unique, doFly)\n    }\n  })\n\n  function _inflight (unique, doFly) {\n    if (!active[unique]) {\n      active[unique] = (new Bluebird(function (resolve) {\n        return resolve(doFly())\n      }))\n      active[unique].then(cleanup, cleanup)\n      function cleanup() { delete active[unique] }\n    }\n    return active[unique]\n  }\n}\n"]},"metadata":{},"sourceType":"script"}