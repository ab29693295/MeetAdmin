{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass Semaphore {\n  /**\n   * Creates an instance of Semaphore.\n   *\n   * @param {number} available the amount available number of \"tasks\"\n   * in the Semaphore\n   */\n  constructor(available) {\n    this.available = available;\n    /** @type {(function(): void)[]} */\n\n    this.waiters = [];\n    /** @private */\n\n    this._continue = this._continue.bind(this);\n  }\n  /**\n   * @param {function(): void} callback function block to capture and run\n   * @returns {void}\n   */\n\n\n  acquire(callback) {\n    if (this.available > 0) {\n      this.available--;\n      callback();\n    } else {\n      this.waiters.push(callback);\n    }\n  }\n\n  release() {\n    this.available++;\n\n    if (this.waiters.length > 0) {\n      process.nextTick(this._continue);\n    }\n  }\n\n  _continue() {\n    if (this.available > 0) {\n      if (this.waiters.length > 0) {\n        this.available--;\n        const callback = this.waiters.pop();\n        callback();\n      }\n    }\n  }\n\n}\n\nmodule.exports = Semaphore;","map":{"version":3,"sources":["E:/Users/cnki/source/repos/ab29693295/MeetAdmin/node_modules/webpack/lib/util/Semaphore.js"],"names":["Semaphore","constructor","available","waiters","_continue","bind","acquire","callback","push","release","length","process","nextTick","pop","module","exports"],"mappings":"AAAA;;;;AAIA;;AAEA,MAAMA,SAAN,CAAgB;AACf;;;;;;AAMAC,EAAAA,WAAW,CAACC,SAAD,EAAY;AACtB,SAAKA,SAAL,GAAiBA,SAAjB;AACA;;AACA,SAAKC,OAAL,GAAe,EAAf;AACA;;AACA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAjB;AACA;AAED;;;;;;AAIAC,EAAAA,OAAO,CAACC,QAAD,EAAW;AACjB,QAAI,KAAKL,SAAL,GAAiB,CAArB,EAAwB;AACvB,WAAKA,SAAL;AACAK,MAAAA,QAAQ;AACR,KAHD,MAGO;AACN,WAAKJ,OAAL,CAAaK,IAAb,CAAkBD,QAAlB;AACA;AACD;;AAEDE,EAAAA,OAAO,GAAG;AACT,SAAKP,SAAL;;AACA,QAAI,KAAKC,OAAL,CAAaO,MAAb,GAAsB,CAA1B,EAA6B;AAC5BC,MAAAA,OAAO,CAACC,QAAR,CAAiB,KAAKR,SAAtB;AACA;AACD;;AAEDA,EAAAA,SAAS,GAAG;AACX,QAAI,KAAKF,SAAL,GAAiB,CAArB,EAAwB;AACvB,UAAI,KAAKC,OAAL,CAAaO,MAAb,GAAsB,CAA1B,EAA6B;AAC5B,aAAKR,SAAL;AACA,cAAMK,QAAQ,GAAG,KAAKJ,OAAL,CAAaU,GAAb,EAAjB;AACAN,QAAAA,QAAQ;AACR;AACD;AACD;;AA3Cc;;AA8ChBO,MAAM,CAACC,OAAP,GAAiBf,SAAjB","sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nclass Semaphore {\n\t/**\n\t * Creates an instance of Semaphore.\n\t *\n\t * @param {number} available the amount available number of \"tasks\"\n\t * in the Semaphore\n\t */\n\tconstructor(available) {\n\t\tthis.available = available;\n\t\t/** @type {(function(): void)[]} */\n\t\tthis.waiters = [];\n\t\t/** @private */\n\t\tthis._continue = this._continue.bind(this);\n\t}\n\n\t/**\n\t * @param {function(): void} callback function block to capture and run\n\t * @returns {void}\n\t */\n\tacquire(callback) {\n\t\tif (this.available > 0) {\n\t\t\tthis.available--;\n\t\t\tcallback();\n\t\t} else {\n\t\t\tthis.waiters.push(callback);\n\t\t}\n\t}\n\n\trelease() {\n\t\tthis.available++;\n\t\tif (this.waiters.length > 0) {\n\t\t\tprocess.nextTick(this._continue);\n\t\t}\n\t}\n\n\t_continue() {\n\t\tif (this.available > 0) {\n\t\t\tif (this.waiters.length > 0) {\n\t\t\t\tthis.available--;\n\t\t\t\tconst callback = this.waiters.pop();\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t}\n}\n\nmodule.exports = Semaphore;\n"]},"metadata":{},"sourceType":"script"}